<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quantum Gastronomy: Schr√∂dinger's Souffl√©</title>
    <style>
      body {
        font-family: "Courier New", monospace;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background-color: #f0f0f0;
        color: #333;
        margin: 0;
        padding: 20px;
      }

      h1 {
        color: #000;
        text-align: center;
        margin-bottom: 30px;
      }

      #game-container {
        display: flex;
        flex-direction: row;
        gap: 40px;
        background-color: #fff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      #ingredients-pool {
        display: flex;
        flex-direction: column;
        gap: 15px;
        border-right: 2px dashed #ccc;
        padding-right: 30px;
      }

      .ingredient {
        width: 100px;
        height: 40px;
        background-color: #e0e0e0;
        border: 1px solid #bbb;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1em;
        cursor: grab;
        transition: transform 0.1s ease-in-out, background-color 0.3s;
        position: relative;
        text-align: center;
        user-select: none; /* Prevent text selection during drag */
      }

      .ingredient::before {
        content: "?"; /* Initial 'superposition' state */
        position: absolute;
        font-size: 1.5em;
        color: rgba(0, 0, 0, 0.2);
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        transition: opacity 0.3s;
      }

      .ingredient[data-state]::before {
        opacity: 0; /* Hide '?' when state is determined */
      }

      .ingredient:active {
        cursor: grabbing;
        transform: scale(1.05);
      }

      .ingredient.dragging {
        opacity: 0.6;
        border: 1px dashed #666;
        background-color: #d0d0d0;
      }

      #drop-zone {
        width: 250px;
        height: 300px;
        border: 2px dashed #007bff;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        background-color: #e6f2ff;
        transition: background-color 0.3s, border-color 0.3s;
        position: relative;
        overflow: hidden;
      }

      #drop-zone.drag-over {
        background-color: #cce0ff;
        border-color: #0056b3;
      }

      #souffle-state {
        font-size: 1.5em;
        font-weight: bold;
        margin-top: 20px;
        color: #000;
      }

      #souffle-visual {
        font-size: 5em;
        margin-bottom: 10px;
        line-height: 1;
      }

      #status-log {
        width: 100%;
        max-width: 600px;
        background-color: #333;
        color: #0f0;
        padding: 15px;
        border-radius: 8px;
        margin-top: 40px;
        font-size: 0.9em;
        max-height: 150px;
        overflow-y: auto;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>Quantum Gastronomy: Schr√∂dinger's Souffl√©</h1>

    <div id="game-container">
      <div id="ingredients-pool">
        <h2>Ingredients in Superposition</h2>
        <div class="ingredient" draggable="true" data-name="Egg">Egg</div>
        <div class="ingredient" draggable="true" data-name="Flour">Flour</div>
        <div class="ingredient" draggable="true" data-name="Sugar">Sugar</div>
        <div class="ingredient" draggable="true" data-name="Salt">Salt</div>
        <div class="ingredient" draggable="true" data-name="Butter">Butter</div>
      </div>

      <div id="drop-zone">
        <h2>Souffl√© Chamber</h2>
        <div id="souffle-visual">ü•ö</div>
        <div id="souffle-state">Awaiting Observation...</div>
        <p style="font-size: 0.8em; margin-top: 10px">
          Drag ingredients here to observe their effect!
        </p>
      </div>
    </div>

    <pre id="status-log">--- Quantum Log ---</pre>

    <script>
      const ingredientsPool = document.getElementById("ingredients-pool");
      const dropZone = document.getElementById("drop-zone");
      const souffleVisual = document.getElementById("souffle-visual");
      const souffleState = document.getElementById("souffle-state");
      const statusLog = document.getElementById("status-log");

      let draggedIngredient = null;
      let souffleHealth = 50; // A base "health" for the souffl√©, 0-100
      let observationCount = 0;

      const ingredientQuantumStates = {
        Egg: ["Coagulated (High Protein)", "Emulsified (Fat Binding)"],
        Flour: ["Glutenous (Structure)", "Starchy (Thickening)"],
        Sugar: ["Caramelized (Sweetness)", "Fermented (Leavening)"],
        Salt: ["Crystalline (Flavor Enhancer)", "Ionic (Mineral Impact)"],
        Butter: ["Melted (Moisture)", "Browned (Nutty Flavor)"],
      };

      const souffleStates = {
        risen: {
          visual: "‚òÅÔ∏è",
          text: "Souffl√© Risen! (Wave Function Collapsed High)",
        },
        collapsed: {
          visual: "ü•û",
          text: "Souffl√© Collapsed! (Wave Function Collapsed Low)",
        },
        undetermined: { visual: "ü•ö", text: "Awaiting Observation..." },
      };

      function log(message) {
        statusLog.textContent += `\n[${new Date().toLocaleTimeString()}] ${message}`;
        statusLog.scrollTop = statusLog.scrollHeight; // Auto-scroll to bottom
      }

      function updateSouffleState() {
        observationCount++;
        if (observationCount < 3) {
          souffleVisual.textContent = souffleStates.undetermined.visual;
          souffleState.textContent = `Still Undetermined... (${observationCount} observations)`;
          return;
        }

        // A truly quantum effect: even with "good" ingredients, there's a chance of collapse
        const quantumFluctuation = Math.random() < 0.3; // 30% chance of random collapse/rise

        if (souffleHealth > 60 && !quantumFluctuation) {
          souffleVisual.textContent = souffleStates.risen.visual;
          souffleState.textContent = souffleStates.risen.text;
          log("Souffl√©'s wave function collapsed into a Risen state!");
        } else if (souffleHealth <= 60 && quantumFluctuation) {
          souffleVisual.textContent = souffleStates.collapsed.visual;
          souffleState.textContent = souffleStates.collapsed.text;
          log(
            "Souffl√©'s wave function collapsed into a Collapsed state due to quantum interference!"
          );
        } else if (souffleHealth > 60 && quantumFluctuation) {
          // Risen but a quantum fluctuation tried to collapse it - maybe it just wiggled
          souffleVisual.textContent = souffleStates.risen.visual;
          souffleState.textContent =
            souffleStates.risen.text + " (felt a quantum tremor!)";
          log("Souffl√© resisted quantum collapse and remained risen!");
        } else {
          souffleVisual.textContent = souffleStates.collapsed.visual;
          souffleState.textContent = souffleStates.collapsed.text;
          log("Souffl√© collapsed. The universe conspires against us.");
        }
      }

      // --- Drag and Drop Logic ---
      ingredientsPool.addEventListener("dragstart", (e) => {
        if (e.target.classList.contains("ingredient")) {
          draggedIngredient = e.target;
          e.target.classList.add("dragging");
          e.dataTransfer.effectAllowed = "move";
          e.dataTransfer.setData("text/plain", e.target.dataset.name);
        }
      });

      ingredientsPool.addEventListener("dragend", (e) => {
        if (e.target.classList.contains("ingredient")) {
          e.target.classList.remove("dragging");
        }
      });

      dropZone.addEventListener("dragover", (e) => {
        e.preventDefault(); // Allow drop
        dropZone.classList.add("drag-over");
        e.dataTransfer.dropEffect = "move";
      });

      dropZone.addEventListener("dragleave", () => {
        dropZone.classList.remove("drag-over");
      });

      dropZone.addEventListener("drop", (e) => {
        e.preventDefault();
        dropZone.classList.remove("drag-over");

        if (draggedIngredient) {
          const ingredientName = draggedIngredient.dataset.name;

          // --- Quantum Observation of Ingredient ---
          const possibleStates = ingredientQuantumStates[ingredientName];
          const observedState =
            possibleStates[Math.floor(Math.random() * possibleStates.length)];
          draggedIngredient.dataset.state = observedState; // "Collapse" its state
          draggedIngredient.style.backgroundColor = "#d4edda"; // Visual cue of observation
          draggedIngredient.innerHTML = `<strong>${ingredientName}</strong><br><small>${observedState}</small>`;
          draggedIngredient.style.cursor = "default"; // No longer draggable
          draggedIngredient.draggable = false;

          log(
            `Ingredient "${ingredientName}" observed! Collapsed into state: "${observedState}"`
          );

          // --- Effect on Souffl√© (Quantum Interaction) ---
          let healthChange = 0;
          let uncertaintyEffect = "";

          switch (ingredientName) {
            case "Egg":
              healthChange = observedState.includes("Coagulated") ? 15 : 5;
              uncertaintyEffect = " (also affects texture unpredictably)";
              break;
            case "Flour":
              healthChange = observedState.includes("Glutenous") ? 10 : 3;
              uncertaintyEffect = " (introduces viscosity fluxuations)";
              break;
            case "Sugar":
              healthChange = observedState.includes("Caramelized") ? 8 : -2; // Sugar can be tricky!
              uncertaintyEffect = " (might unexpectedly alter leavening)";
              break;
            case "Salt":
              healthChange = observedState.includes("Flavor Enhancer") ? 5 : -5;
              // Uncertainty: Salt might also affect sweetness
              if (Math.random() < 0.5) {
                // 50% chance of side effect
                healthChange += Math.random() > 0.5 ? 2 : -2; // Small random buff/debuff
                uncertaintyEffect =
                  " (uncertainty principle: salt unexpectedly altered sweetness!)";
              }
              break;
            case "Butter":
              healthChange = observedState.includes("Melted") ? 7 : -3;
              uncertaintyEffect = " (introduces fat distribution anomalies)";
              break;
          }

          souffleHealth += healthChange;
          souffleHealth = Math.max(0, Math.min(100, souffleHealth)); // Clamp health

          log(
            `Souffl√© interacted with ${ingredientName}. Health change: ${healthChange}. Current Souffl√© Health: ${souffleHealth}. ${uncertaintyEffect}`
          );

          updateSouffleState(); // Re-evaluate souffl√©'s state after interaction
          draggedIngredient = null; // Reset for next drag
        }
      });
    </script>
  </body>
</html>
